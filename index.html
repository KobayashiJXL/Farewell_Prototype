<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mikeç»™å¤§å®¶çš„ä¿¡</title>

  <!-- å¯†ç æ ¡éªŒï¼ˆé¡µé¢å†…å®¹æ˜¾ç¤ºå‰æ‰§è¡Œï¼‰ -->
  <script>
    (function(){
      const correct = "Toowong";
      const input = prompt("è¯·è¾“å…¥è®¿é—®å¯†ç ï¼š");
      // å»æ‰é¦–å°¾ç©ºç™½
      if (!input || input.trim() !== correct) {
        alert("å¯†ç é”™è¯¯ï¼Œå³å°†è·³è½¬åˆ°å…¶ä»–ç½‘ç«™ã€‚");
        window.location.href = "https://www.jw.org";
      }
      // å¦‚æœå¯†ç æ­£ç¡®ï¼Œç»§ç»­åŠ è½½é¡µé¢
    })();
  </script>

  <!-- æ‰‹å†™ä¸­æ–‡å­—ä½“ï¼ˆGoogle Fontsï¼‰ -->
  <link href="https://fonts.googleapis.com/css2?family=ZCOOL+QingKe+HuangYou&family=Pacifico&display=swap" rel="stylesheet">

  <style>
    :root{
      --accent: #a35c7a;
      --paper: #fffbea;
      --paper-border: #d2b48c;
      --bg: #fdfaf6;
    }
    html,body{
      height:100%;
      margin:0;
      font-family:"Noto Serif SC", "ZCOOL QingKe HuangYou", serif;
      background-color: var(--bg);
      color:#333;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    /* ====== ä¿¡çº¸å°é¢ ====== */
    #cover {
      position:fixed;
      inset:0;
      display:flex;
      justify-content:center;
      align-items:center;
      background: var(--bg);
      z-index:50;
      perspective:1200px;
    }

    #letter {
      width:85%;
      max-width:760px;
      background: var(--paper);
      border: 2px solid var(--paper-border);
      border-radius:12px;
      padding:34px 36px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.12);
      display:flex;
      flex-direction:column;
      gap:18px;
      transform-origin: left center;
      transition: transform 900ms ease, opacity 900ms ease;
    }

    /* å·¦ä¸Šè§’å°ç…§ç‰‡ */
    #cover-img {
      width: 16.66%; /* 1/6 */
      max-width: 130px;
      border-radius:8px;
      border:1px solid var(--paper-border);
      box-shadow: 0 4px 12px rgba(0,0,0,0.12);
      float:left;
      margin-right:16px;
      margin-bottom:8px;
    }

    /* ä¿¡çº¸æ–‡å­—ï¼ˆæ‰‹å†™é£æ ¼ï¼‰ */
    #letter-text{
      font-family: "ZCOOL QingKe HuangYou", "Pacifico", cursive;
      font-size:1.15rem;
      line-height:1.9;
      color:#3b2f2f;
      text-align:left;
      margin:0;
      padding:0;
      clear:both;
    }

    /* å›å¿†æŒ‰é’® */
    #start-btn{
      align-self:flex-start;
      margin-top:6px;
      background:var(--accent);
      color:#fff;
      border:none;
      padding:10px 18px;
      border-radius:8px;
      cursor:pointer;
      font-size:1rem;
      transition:background 200ms ease, transform 120ms ease;
    }
    #start-btn:active{ transform:translateY(1px); }
    #start-btn:hover{ background:#b36b8a; }

    /* ====== éŸ³ä¹æŒ‰é’® ====== */
    #music-btn{
      position:fixed;
      top:18px;
      right:18px;
      width:50px;
      height:50px;
      border-radius:50%;
      background:#fff;
      display:flex;
      align-items:center;
      justify-content:center;
      box-shadow:0 6px 18px rgba(0,0,0,0.15);
      cursor:pointer;
      z-index:80;
    }
    #music-btn.playing{ animation:spin 3s linear infinite; }
    @keyframes spin{ from{transform:rotate(0)} to{transform:rotate(360deg)} }
    #music-btn::before{ content:"ğŸµ"; font-size:22px; }

    /* ====== ç›¸å†Œå®¹å™¨ ====== */
    #slideshow-wrap{
      display:none;
      position:fixed;
      inset:0;
      background:#000;
      z-index:10;
      align-items:center;
      justify-content:center;
      overflow:hidden;
    }

    #slideshow{
      max-width:100%;
      max-height:100%;
      object-fit:contain;
      transition:opacity 450ms ease;
      position:relative;
      top:50%;
      left:50%;
      transform:translate(-50%,-50%);
    }

    .nav-btn{
      position:fixed;
      top:50%;
      transform:translateY(-50%);
      background:rgba(255,255,255,0.25);
      border:none;
      color:#fff;
      font-size:2rem;
      padding:8px 14px;
      border-radius:8px;
      cursor:pointer;
      z-index:90;
      user-select:none;
    }
    #prev-btn{ left:18px; }
    #next-btn{ right:18px; }
    .nav-btn:hover{ background:rgba(255,255,255,0.5); }

    /* å“åº”è°ƒæ•´ï¼šä¿¡çº¸åœ¨çª„å±æ—¶å¸ƒå±€æ›´å‹å¥½ */
    @media (max-width:720px){
      #cover-img{ width:24%; max-width:120px; margin-right:12px; }
      #letter{ padding:22px; width:92%; }
      #letter-text{ font-size:1rem; line-height:1.7; }
    }
  </style>
</head>
<body>
  <!-- éŸ³ä¹æ§åˆ¶æŒ‰é’® -->
  <div id="music-btn" title="æ’­æ”¾ / æš‚åœéŸ³ä¹"></div>

  <!-- å°é¢ï¼ˆä¿¡çº¸ï¼‰ -->
  <div id="cover" aria-hidden="false">
    <div id="letter" role="region" aria-label="å°é¢ä¿¡çº¸">
      <img id="cover-img" src="cover.jpg" alt="å°é¢ç…§ç‰‡">
      <div id="letter-text">
        <p>äº²çˆ±çš„æœ‹å‹ä»¬ï¼š</p>
        <p>æ„Ÿè°¢ä½ ä»¬ä¸€è·¯çš„é™ªä¼´ä¸æ¸©æš–ã€‚æ¯ä¸€å¼ ç…§ç‰‡éƒ½æ˜¯ä¸€æ‰‡å°çª—ï¼Œé€è¿‡å®ƒï¼Œæˆ‘çœ‹è§äº†è¿‡å»é‚£äº›æ¸©æŸ”çš„æ—¶å…‰ã€‚</p>
        <p>å¦‚æœä½ æ„¿æ„ï¼Œè¯·æŒ‰ä¸‹ã€Œå›å¿†ã€ï¼Œè®©éŸ³ä¹å“èµ·ï¼Œæˆ‘ä»¬ä¸€èµ·ç¿»å¼€è¿™äº›ç”»é¢ã€‚</p>
      </div>

      <button id="start-btn" aria-label="æ‰“å¼€å›å¿†">å›å¿†</button>
    </div>
  </div>

  <!-- ç›¸å†Œæ˜¾ç¤ºå±‚ -->
  <div id="slideshow-wrap" aria-hidden="true">
    <img id="slideshow" src="1.jpg" alt="ç›¸å†Œç…§ç‰‡">
    <button class="nav-btn" id="prev-btn" aria-label="ä¸Šä¸€å¼ ">â®</button>
    <button class="nav-btn" id="next-btn" aria-label="ä¸‹ä¸€å¼ ">â¯</button>
  </div>

  <!-- éŸ³é¢‘ï¼ˆè¯·ç¡®ä¿ 365.mp3 åœ¨æ ¹ç›®å½•ï¼‰ -->
  <audio id="bgm" loop preload="auto">
    <source src="365.mp3" type="audio/mp3">
    æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ’­æ”¾ã€‚
  </audio>

  <!-- ä¸»è„šæœ¬ -->
  <script>
    // å…ƒç´ 
    const musicBtn = document.getElementById('music-btn');
    const bgm = document.getElementById('bgm');
    const cover = document.getElementById('cover');
    const letter = document.getElementById('letter');
    const startBtn = document.getElementById('start-btn');
    const slideshowWrap = document.getElementById('slideshow-wrap');
    const imgEl = document.getElementById('slideshow');
    const prevBtn = document.getElementById('prev-btn');
    const nextBtn = document.getElementById('next-btn');

    // å›¾ç‰‡æ•°ç»„ 1.jpg ~ 59.jpgï¼ˆè‹¥æ”¾åœ¨ images/ æ–‡ä»¶å¤¹ï¼Œè¯·åœ¨è·¯å¾„å‰åŠ  'images/'ï¼‰
    const TOTAL = 59;
    const images = Array.from({length: TOTAL}, (_,i) => `${i+1}.jpg`);

    // è½®æ’­è®¾ç½®
    let current = 0;
    const AUTO_MS = 15000; // è‡ªåŠ¨è½®æ’­é—´éš”
    let autoTimer = null;
    let isHover = false;

    function showImage(index){
      index = (index + images.length) % images.length;
      current = index;
      imgEl.style.opacity = 0;
      setTimeout(() => {
        imgEl.src = images[current];
        imgEl.style.opacity = 1;
      }, 200);
      // é¢„åŠ è½½ä¸‹ä¸€å¼ 
      const nextIdx = (current + 1) % images.length;
      const p = new Image(); p.src = images[nextIdx];
    }

    function nextImage(){ showImage((current + 1) % images.length); }
    function prevImage(){ showImage((current - 1 + images.length) % images.length); }

    prevBtn.addEventListener('click', ()=>{
      stopAutoTemp();
      prevImage();
    });
    nextBtn.addEventListener('click', ()=>{
      stopAutoTemp();
      nextImage();
    });

    // éŸ³ä¹æŒ‰é’®
    musicBtn.addEventListener('click', ()=>{
      if (bgm.paused) {
        bgm.play().catch(()=>{}); // æ•è·è¢«æµè§ˆå™¨é˜»æ­¢çš„å¼‚å¸¸
        musicBtn.classList.add('playing');
      } else {
        bgm.pause();
        musicBtn.classList.remove('playing');
      }
    });

    // ç‚¹å‡»å›å¿†ï¼šç¿»ä¹¦åŠ¨ç”» -> æ˜¾ç¤ºç›¸å†Œ -> æ’­æ”¾éŸ³ä¹ -> å¼€å§‹è‡ªåŠ¨è½®æ’­
    startBtn.addEventListener('click', ()=>{
      // ç¿»é¡µæ•ˆæœï¼ˆYè½´æ—‹è½¬ + é€æ˜åº¦ï¼‰
      letter.style.transform = "rotateY(-90deg) translateX(-20px)";
      letter.style.opacity = 0;
      setTimeout(()=>{
        cover.style.display = "none";
        slideshowWrap.style.display = "flex";
        slideshowWrap.style.alignItems = "center";
        slideshowWrap.style.justifyContent = "center";
        slideshowWrap.setAttribute('aria-hidden','false');
        showImage(0);
        // å°è¯•æ’­æ”¾éŸ³ä¹
        bgm.play().then(()=> musicBtn.classList.add('playing')).catch(()=>{});
        startAuto();
      }, 900);
    });

    // è‡ªåŠ¨è½®æ’­
    function startAuto(){
      stopAuto();
      autoTimer = setInterval(()=>{ if(!isHover) nextImage(); }, AUTO_MS);
    }
    function stopAuto(){ if (autoTimer) { clearInterval(autoTimer); autoTimer = null; } }
    function stopAutoTemp(){
      stopAuto();
      setTimeout(startAuto, 7000);
    }

    // é¼ æ ‡/è§¦æ‘¸äº¤äº’æš‚åœè‡ªåŠ¨
    imgEl.addEventListener('mouseenter', ()=> isHover = true);
    imgEl.addEventListener('mouseleave', ()=> isHover = false);
    imgEl.addEventListener('touchstart', ()=> { isHover = true; stopAutoTemp(); });
    imgEl.addEventListener('touchend', ()=> isHover = false);

    // é”®ç›˜æ§åˆ¶
    document.addEventListener('keydown', (e)=>{
      if (e.key === 'ArrowLeft') { stopAutoTemp(); prevImage(); }
      if (e.key === 'ArrowRight') { stopAutoTemp(); nextImage(); }
    });

    // é¡µé¢å¯è§æ—¶é¢„åŠ è½½ç¬¬ä¸€å¼ 
    document.addEventListener('DOMContentLoaded', ()=>{
      // é¢„åŠ è½½ç¬¬ä¸€å¼ å’Œç¬¬äºŒå¼ 
      const p1 = new Image(); p1.src = images[0];
      const p2 = new Image(); p2.src = images[1 % images.length];
    });
  </script>
</body>
</html>
